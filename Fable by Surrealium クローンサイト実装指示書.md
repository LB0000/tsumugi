# Fable by Surrealium クローンサイト実装指示書

## 1. プロジェクト概要

このプロジェクトの目標は、AIを用いてペットや人物の写真をルネサンス風の肖像画に変換するウェブサービス「Fable by Surrealium」のクローンサイトを構築することです。ユーザーが写真をアップロードし、アートスタイルを選択すると、AIが生成した肖像画をプレビュー・購入できる一連の機能を実現します。

### 主要機能
- 写真アップロード機能
- AIによる画像生成・変換機能
- 複数カテゴリ（ペット、家族、子供）と言語スタイルの選択機能
- デジタルコンテンツのプレビューと購入機能
- 料金プランの表示と比較
- モバイル対応のレスポンシブデザイン

## 2. 技術スタック

本プロジェクトでは、以下の技術スタックを使用します。モダンで開発効率の高い構成を目指します。

| 領域 | 技術 | 理由 |
|---|---|---|
| フロントエンド | React (Vite), TypeScript, Tailwind CSS | 高速な開発環境、型安全性、効率的なUI構築のため。 |
| 状態管理 | Zustand | シンプルで学習コストが低く、React Hooksとの親和性が高いため。 |
| バックエンド | Node.js with Express.js | フロントエンドと同じJavaScript/TypeScriptで開発でき、APIサーバーとして十分な性能を持つため。 |
| 画像生成AI | （外部APIを想定） | Stable Diffusion APIやMidjourney APIなど、サードパーティの画像生成サービスと連携します。まずはAPI連携部分のインターフェースを定義し、モックデータで開発を進めてください。 |
| 決済処理 | Stripe API | 決済機能の実装にはStripeを使用します。決済ボタンと、サーバーサイドでの決済処理の口（スタブ）を用意してください。 |

## 3. ページとコンポーネント設計

サイトは複数のコンポーネントから構成されます。再利用性を意識してコンポーネントを設計・実装してください。

### 共通コンポーネント
- **Header**: ロゴ、カテゴリ選択タブ（Pets, Family, Kids）、サイドバーを開くためのハンバーガーメニューボタンを配置します。
- **Sidebar**: モバイル表示時にメインナビゲーションとして機能します。Home, Create（各種ポートレートへのリンク）, Pricing, Sign Inなどのリンクを配置します。
- **Footer**: 親ブランドである「SURREALIUM」のロゴや、関連リンクを配置します。
- **StyledButton**: サイト全体で共通のデザインを持つボタンコンポーネントを作成します。

### 主要ページと機能

#### トップページ (`/`)
- **役割**: サイトの入り口として、サービスの魅力を伝え、ユーザーを画像生成フローへ誘導します。
- **機能**: 
  - ヘッダーのカテゴリタブ（Pets, Family, Kids）に応じて、メインのキャッチコピー、サブテキスト、サンプル画像が動的に切り替わるように実装します。
  - 「Upload Photo」エリアは、クリックでファイル選択ダイアログを開き、ドラッグ＆ドロップにも対応するコンポーネントとして作成します。
  - 「Pick Style」ボタンをクリックすると、後述のスタイル選択モーダルが表示されます。

#### 料金ページ (`/pricing`)
- **役割**: サービスの料金体系を分かりやすく提示します。
- **機能**: 
  - 「Pay-Per-Portrait」「Art Print Pricing」「Credit Packs」の3つのセクションを設けます。
  - 「Credit Packs」セクションでは、各プラン（Digital, Starter, Studio）の機能や価格を比較できる表（`<table>`）を実装します。

#### サポートページ (`/support`)
- **役割**: ユーザーからの問い合わせに対応するインターフェースを提供します。
- **機能**: 
  - AIチャットボットを模したUIを実装します。メッセージ入力欄と送信ボタンを配置します。
  - 「Find my download」「Track my print」などの一般的な質問に答えるためのクイックアクションボタンを横並びで配置します。

## 4. デザインシステム

サイト全体で統一されたデザインを適用するため、以下のデザインシステムを定義し、Tailwind CSSの`tailwind.config.js`で設定してください。

### カラーパレット

| 用途 | カラー名 | 16進数コード | Tailwind設定 |
|---|---|---|---|
| 背景 | `background` | `#000000` | `colors.black` |
| テキスト | `foreground` | `#FFFFFF` | `colors.white` |
| アクセント緑 | `accent-green` | `#1ABC9C` | `colors.teal[400]` |
| アクセント黄 | `accent-yellow` | `#F1C40F` | `colors.amber[400]` |
| サブテキスト | `muted` | `#999999` | `colors.gray[500]` |
| カード背景 | `card` | `#262626` | `colors.neutral[800]` |

### タイポグラフィ
- **見出しフォント**: `Playfair Display` (serif)
- **本文フォント**: `Inter` (sans-serif)

Google Fontsから上記フォントをインポートし、Tailwind CSSの`fontFamily`に設定してください。

## 5. AI画像生成連携

本プロジェクトの核となる機能です。バックエンドに画像生成をリクエストし、結果をフロントエンドで表示するフローを実装します。

### バックエンド (APIエンドポイント)
- **エンドポイント**: `POST /api/generate-image`
- **リクエストボディ**:
  ```json
  {
    "baseImage": "(Base64エンコードされた画像データ)",
    "style": "(選択されたアートスタイル名、例: 'Baroque Red')",
    "category": "(選択されたカテゴリ名、例: 'Pet')"
  }
  ```
- **処理内容**:
  1. リクエストを受け取り、外部の画像生成AI APIに送信するためのプロンプトを組み立てます。（例：「A renaissance portrait of a [pet/person] in the style of [style]」）
  2. 外部APIを呼び出し、生成された画像データを取得します。
  3. 生成された画像をBase64エンコードし、レスポンスとして返却します。
- **レスポンス**:
  ```json
  {
    "generatedImage": "(Base64エンコードされた生成画像データ)"
  }
  ```

### フロントエンド
- 写真アップロード後、Base64形式で画像データを読み込みます。
- 選択されたスタイル情報と共に、バックエンドの`/api/generate-image`エンドポイントにリクエストを送信します。
- レスポンスとして受け取った生成画像をプレビューエリアに表示します。

## 6. 実装ステップ案

以下のステップで開発を進めることを推奨します。

1.  **環境構築**: Vite + React + TypeScriptプロジェクトをセットアップし、Tailwind CSSとZustandを導入します。
2.  **基本レイアウト**: `Header`, `Footer`, `Sidebar`コンポーネントを作成し、基本的なページルーティングを設定します。
3.  **トップページ実装**: カテゴリ選択による動的なコンテンツ切り替え機能を実装します。
4.  **画像アップロードとプレビュー**: 写真をアップロードし、プレビュー表示する機能を実装します。
5.  **バックエンドAPI**: 画像生成リクエストを受け付けるExpressサーバーとAPIエンドポイントを作成します。（AI連携部分はモックでOK）
6.  **フロントエンドとバックエンドの連携**: アップロードした画像をバックエンドに送信し、返ってきたモック画像を表示するフローを完成させます。
7.  **静的ページ作成**: 料金ページ、サポートページなど、静的な情報ページのUIを構築します。
8.  **全体調整**: レスポンシブ対応の最終調整と、全体の動作確認を行います。

## 7. 参考資料

本指示書の作成にあたり、以下のサイト分析ドキュメントを参照しました。実装中に不明点があれば、このドキュメントに立ち返ってください。

- `site_analysis.md`

---

**指示:** 上記の指示書に基づき、プロジェクトを開始してください。まずは環境構築から着手し、ステップバイステップで実装を進めてください。不明点があれば都度質問してください。
