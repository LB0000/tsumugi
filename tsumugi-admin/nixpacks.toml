# Explicit phases to prevent Caddy auto-detection and ensure devDependencies
[phases.setup]
nixPkgs = ['nodejs_18', 'npm-9_x', 'openssl']

[phases.install]
cmds = ['npm ci --include=dev']

[phases.build]
cmds = ['npm run build']

[start]
cmd = 'npm run start'
